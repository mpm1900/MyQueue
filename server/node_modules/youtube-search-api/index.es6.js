import axios from 'axios';

const BASE_URL = 'https://www.googleapis.com/youtube/v3/search';

export default function YTSearch(options, callback) {
	if(!options.key) throw new Error('API KEY is required but it is undefined!');

	const params = {
		part: 'snippet',
		key: options.key,
		q: options.term,
		maxResults: !options.max ? 5 : options.max,
		type: 'video',
		videoEmbeddable: 'true'
	};

	axios.get(BASE_URL, { params })
	.then(response => {
		if(callback) callback(response.data.items);
	})
	.catch(response => {
		for(let i = 0; i < response.data.error.errors.length; i++) {
			console.error(
				`error:${response.data.error.code}
				  message:${response.data.error.message} 
				  reason:${response.data.error.errors[i].reason}`
			);
		}
	});
}